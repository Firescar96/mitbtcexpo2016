<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="alternate" title="RSS Feed" href="/rss.xml" type="application/rss+xml">
<title>Compost</title>
<style type="text/css">
<!--
/* begin css/default.css */
.tag-flag,
.tag-troll,
.tag-spam,
.tag-remove,
.tag-abuse {
/* negative (red) tags */
	color: #c00000;
}

.tag-remove {
/* remove tag */
	font-weight: bold;
}

.tag-approve,
.tag-accept,
.tag-friend,
.tag-attend {
/* positive (green) tags */
	color: #008000;
}

div.reply {
/* creates indented effect for sub-replies */
	margin-left: 2%;
	padding-left: 3em;
}

.item-textart {
/* textart items get monospace font */
	font-family: monospace;
	font-size: 12pt;
}

.tag-aolart {
/* aol art in 10-point arial font */
    font-family: Arial;
    font-size: 10pt;
}

div.txt {
	padding-left: 1em;
}

.byadmin {
/* text by admin, displayed in red for users' sake */
	color: red;
}

.signed {
/* signed things are displayed in gold */
    border-color: gold;
}


#eventLocation, #eventBrcLocation {
/* event form */
	background-color: #ffffff;
	padding: 5pt;
}

#eventDate {
/* event form */
	background-color: #e0e0e0;
	padding: 5pt;
}

#loadingIndicator, #spanLoadingIndicator, #ariaAlert {
	color: #000000;
	background-color: #f0f0d0;
	padding: 3pt;
	position: fixed;
	top: 0;
	left: 0;
	margin: 0;
	font-family: tahoma, arial, sans-serif;
	font-size: smaller;
	font-weight: bold;
}
#loadingIndicator a {
	/* style for links in loading indicator */
}
.notification {
	color: #000000;
	background-color: #f0f0d0;
	padding: 3pt;
	font-size: smaller;
	font-weight: bold;
}
noscript {
	color: red;
}
.menubar a, .titlebar a {
	text-decoration: none;
	color: #000000;
}
/* end css/default.css */

/* avatar.css */
.avatar .icon {
	font-weight: bold;
	font-size: smaller;
}
/* / avatar.css */

/* dragging.css */

table.dialog {
	display: inline-block;
	vertical-align: top;
}
form {
	display: inline;
}

/* / dragging.css */

/* theme/mitbtc/additional.css */
/* / theme/mitbtc/additional.css */
/* theme/chicago/additional.css */
body {
	font-family: Tahoma, Arial, Helvetica, sans-serif;
	background-color: #008080;
}
input {
	border-color: blue;
}
input[type=text], input[type=password], select, option, textarea {
	background-color: #ffffff;
	color: #000000;
}
#txtClock {
	border: 1pt inset #c0c0c0;
}
@media (prefers-color-scheme: dark) {

}
.beginner {
    background-color: #f0f0d0;
}
.dialog {
	box-shadow: 3pt 3pt 0 rgba(0, 20, 20, 0.5);
	border: #c0c0c0 outset 2pt;
	background-color: #c0c0c0;
	font-family: Tahoma, Arial, Helvetica, sans-serif;
	font-size: 10pt;
}
.statusbar td {
	border: 1pt inset #c0c0c0;
}
textarea {
    font-family: Fixedsys, "Courier New", Courier, monospace;
    font-size: 12pt;
}

.txt {
/* regular text */
	font-family: Tahoma, Arial, Helvetica, sans-serif;
	font-size: 14pt;
	background-color: #d0d2d4;
	border: 1pt #ffffff inset;
}

a:focus, a:active {
    color: red !important;
    background-color: orange !important;
}
textarea:focus {
    background-color: #fff0e0;
}
input:focus {
    background-color: orange;
}
#serverResponse {
/* response messages from the server */
    background-color: #ffc080;
    color: #000000;
    padding: 5pt;
    spacing: 5pt;
    border: 0;
	box-shadow: 5pt 5pt 0 #006767;
}
#txtClock {
	border: 1pt inset #c0c0c0;
	background-color: #c0c0c0;
}
/* / theme/chicago/additional.css */
-->
</style>
</head>
<body background="/triangles.gif" onbeforeunload="if (window.ShowPreNavigateNotification){ ShowPreNavigateNotification();}" onclick="if (event.target && (event.target.tagName == 'A') && !(event.target.onclick)) { ShowPreNavigateNotification(); }" onload="if (window.OnLoadEverything) { OnLoadEverything(); }" >
<!-- InjectJs2: loading_begin -->

<!-- html/utils/scriptinject.template -->
<script language=javascript><!--
// begin loading_begin.js

//var loadingIndicatorWaitToShowMin = 1500;
//var loadingIndicatorWaitToHideMin = 500;

function addLoadingIndicator (strMessage) { // adds loading indicator bar (to top of page, depending on style)
	//alert('DEBUG: addLoadingIndicator(' + strMessage + ')');
	if (!strMessage) {
		//alert('DEBUG: strMessage = ' + strMessage);
		strMessage = 'Meditate...';
	}
	//alert('DEBUG: addLoadingIndicator: strMessage = ' + strMessage);

	if (!document.createElement) {
		//alert('DEBUG: addLoadingIndicator: warning: no document.createElement');
		return '';
		// #todo improve compatibility here
	}

	//alert('DEBUG: addLoadingIndicator: sanity checks passed!');
	var spanLoadingIndicator = document.createElement('span');
	if (spanLoadingIndicator) {
		spanLoadingIndicator.setAttribute('id', 'loadingIndicator');
		spanLoadingIndicator.innerHTML = strMessage;
		spanLoadingIndicator.zIndex = 1337;
		document.body.appendChild(spanLoadingIndicator);
	}

	return '';

} // addLoadingIndicator()

if (document.createElement) {
	//alert('DEBUG: loading_begin.js: createElement feature check PASSED!');
	var d = new Date();
	var loadingIndicatorStart = d.getTime() * 1;
	var gt = unescape('%3E');

	//var loadingIndicatorloadCounter = 0;
	addLoadingIndicator('Meditate...');
} else {
	//alert('DEBUG: loading_begin.js: createElement feature check FAILED!');
}
// end loading_begin.js

// -->
</script>
<!-- / html/utils/scriptinject.template -->

<b><!-- topmenu2.template -->
<table cellspacing=0 cellpadding=3 border=0 bgcolor="#c0c0c0" class=dialog>
	<tr bgcolor="#35163A">
		<td colspan=2>
			<small>
			<a tabindex=2 href="#maincontent" name=top><font color="#ffffff">MIT Bitcoin Expo</font></a>
<!--			<a tabindex=2 href="#maincontent" name=top><font color="#ffffff">Skip to main content</font></a>;-->
<!--			<a href="/access.html?light=1" tabindex=3><font color="#ffffff">Accessibility mode</font></a>;-->
			<br>
			</small>
		</td>
	</tr>
	<tr bgcolor="#c0c0c0" class=menubar>
		<td>
			<big>
				<big><!-- menuitem.template -->
<a accesskey="h" href="/"><u>H</u>ome</a> &nbsp; 
<!-- / menuitem.template -->
<!-- menuitem.template -->
<a accesskey="r" href="https://tinyurl.com/4ezdhdk"><u>R</u>egister</a> &nbsp; 
<!-- / menuitem.template -->
<!-- menuitem.template -->
<a accesskey="s" href="/speakers.html"><u>S</u>peakers</a> &nbsp; 
<!-- / menuitem.template -->
<!-- menuitem.template -->
<a accesskey="p" href="/sponsors.html">S<u>p</u>onsors</a> &nbsp; 
<!-- / menuitem.template -->
<!-- menuitem.template -->
<a accesskey="a" href="/agenda.html"><u>A</u>genda</a> &nbsp; 
<!-- / menuitem.template -->
<!-- menuitem.template -->
<a accesskey="c" href="https://forms.gle/JUvaggfVCNS8P54G7">Ha<u>c</u>kathon</a> &nbsp; 
<!-- / menuitem.template -->
<!-- menuitem.template -->
<a accesskey="o" href="/committee.html">C<u>o</u>mmittee</a> &nbsp; 
<!-- / menuitem.template -->
<!-- menuitem.template -->
<a accesskey="l" href="/links.html"><u>L</u>inks</a> &nbsp; 
<!-- / menuitem.template -->
<!-- menuitem.template -->
<a accesskey="m" href="https://eepurl.com/gOVdKb"><u>M</u>ailing List</a> &nbsp; 
<!-- / menuitem.template -->
<!-- menuitem.template -->
<a accesskey="i" href="/flashback_2020/">Pr<u>i</u>or Expo</a> &nbsp; 
<!-- / menuitem.template -->
</big>
				<span class=advanced></span>
				<span class=admin> </span>
			</big>
		</td>
	</tr>
</table>
<!-- / topmenu2.template -->
</b>
<p><MAIN ID=maincontent><A NAME=maincontent></A>
<!-- window/standard.template -->
<font face=arial>
	<table cellspacing=0 cellpadding=6 border=0 bgcolor="#c0c0c0" class=dialog>
		<!-- titlebar_with_button.template -->
<tr bgcolor="#35163A" class=titlebar>
	<td valign=middle colspan=6>
		<img src="/logo.png" height=16 width=16>
		<font color="#ffffff"><b>Compost</b></font>
		<br>
	</td>
</tr>
<!-- / titlebar_with_button.template -->


		

		<!-- header_wrapper.template -->
<tr class=heading>
	<!-- header_column.template -->
<th align=left>item_title</th>
<!-- / header_column.template -->
<!-- header_column.template -->
<th align=left>author_key</th>
<!-- / header_column.template -->
<!-- header_column.template -->
<th align=left>add_timestamp</th>
<!-- / header_column.template -->
<!-- header_column.template -->
<th align=left>item_score</th>
<!-- / header_column.template -->
<!-- header_column.template -->
<th align=left>child_count</th>
<!-- / header_column.template -->
<!-- header_column.template -->
<th align=left>file_hash<br></th>
<!-- / header_column.template -->

</tr>
<!-- / header_wrapper.template -->


		<tbody class=content><tr bgcolor="#ffffff"><td><b><a href="/d8/a7/d8a7f946.html">Kim Grauer is the Head of Research at Chainalysis, where she ex</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615853853 title="20:17" class=timestamp>20:17</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>d8a7f9466c05bb636c1c2f50dfa0f69d148a6e74</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/3f/2a/3f2afdee.html">Sacha Ghebali is US Operations and Data Analytics Lead at Kaiko</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615853513 title="20:11" class=timestamp>20:11</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>3f2afdeea9f67febbb61125da36280edca8e283a</td></tr><tr bgcolor="#ffffff"><td><b><a href="/04/b2/04b2a1f3.html">Dan is currently Growth lead at Kraken. His former company Inte</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615852764 title="19:59" class=timestamp>19:59</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>04b2a1f31d9c287c3ee76e4e88955679b5428eeb</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/e4/14/e414217b.html">Max is contributing to several free software projects, building</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615852721 title="19:58" class=timestamp>19:58</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>e414217bb5c5c46f343b1b5bc9879f1f5bcbf555</td></tr><tr bgcolor="#ffffff"><td><b><a href="/f3/60/f36047af.html">Founder and developer of Lightning Network.</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615852186 title="19:49" class=timestamp>19:49</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>f36047af9495c4588b699ccf4295cccf66cc23b1</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/a1/94/a1940e30.html">Ethan is co-founder and CFO of Luxor Mining, a hashrate based p</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615851947 title="19:45" class=timestamp>19:45</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>a1940e3093b932bc6bc08b8bc1d6dfb4cba8d556</td></tr><tr bgcolor="#ffffff"><td><b><a href="/41/62/4162306a.html">name: Jim Cunha</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850968 title="19:29" class=timestamp>19:29</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>4162306a4955da34a53657d6c6597a482b0a8662</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/db/a1/dba11e38.html">Bryan Bishop has a background in software engineering, bitcoin,</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850787 title="19:26" class=timestamp>19:26</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>dba11e38b43841dc640d38488cc610beb71224ad</td></tr><tr bgcolor="#ffffff"><td><b><a href="/51/1e/511e802c.html">Jameson has been building multisignature Bitcoin wallets for 6 </a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850665 title="19:24" class=timestamp>19:24</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>511e802c69a982d72240968d9cf0a585198b4f28</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/a9/6a/a96aa2ec.html">Rob Margolis is a Director on the Global Digital Markets desk a</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850617 title="19:23" class=timestamp>19:23</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>a96aa2eca826cca5a8249c7b76c0941a553b62ee</td></tr><tr bgcolor="#ffffff"><td><b><a href="/5d/f5/5df552da.html">Peter McCormack is a full time journalist/podcaster covering to</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850577 title="19:22" class=timestamp>19:22</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>5df552da2d8ad25630074febd180aa19e5b32c85</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/b6/38/b6384d25.html">Neha Narula is the Director of the Digital Currency Initiative </a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850500 title="19:21" class=timestamp>19:21</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>b6384d25fa68f0d4dbe6f4c576c8faf6cfcaea5f</td></tr><tr bgcolor="#ffffff"><td><b><a href="/ce/e5/cee5f833.html">Michael Perklin is a cryptocurrency security expert, having pro</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850382 title="19:19" class=timestamp>19:19</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>cee5f833a3bb882289265b4a25818e0fc9e4bf10</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/3f/a6/3fa6349f.html">Rene is researching on improving the payment reliability on the</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850265 title="19:17" class=timestamp>19:17</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>3fa6349f325a05ab8fe10321729eca3a72cc11de</td></tr><tr bgcolor="#ffffff"><td><b><a href="/30/f3/30f383a8.html">Mr. Saylor is a technologist, entrepreneur, business executive,</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850200 title="19:16" class=timestamp>19:16</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>30f383a82a74cd7c37994d691bb15434d3ad17d2</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/ad/75/ad751916.html">AJ works on Galaxy Digital’s mining team, where he focuses on</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850138 title="19:15" class=timestamp>19:15</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>ad75191699372751fffd36fe93d210548fb14f50</td></tr><tr bgcolor="#ffffff"><td><b><a href="/54/2d/542d7196.html">-- </a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615850046 title="19:14" class=timestamp>19:14</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>542d719645bc241ac817af68d3e2549fc75dba42</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/3f/78/3f78d91e.html">name: Jimmy Song</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615849985 title="19:13" class=timestamp>19:13</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>3f78d91e55e4902c4f712e33a054334b075be7b8</td></tr><tr bgcolor="#ffffff"><td><b><a href="/20/b7/20b7dd47.html">name: David Vorick</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615849239 title="19:00" class=timestamp>19:00</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>20b7dd47d58d424cafde621ea824701a0b402163</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/28/fe/28feb4eb.html">I am Director of Bitcoin Mining at Fidelity's Center for Applie</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615849148 title="18:59" class=timestamp>18:59</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>28feb4eb277d4913f1e2111e5f5c9729600966cd</td></tr><tr bgcolor="#ffffff"><td><b><a href="/e7/6c/e76c162a.html">Pieter discovered Bitcoin in December 2010 and started contribu</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615849031 title="18:57" class=timestamp>18:57</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>e76c162aa49d1abdec1f5dba31d67df6a776e9ba</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/b9/41/b9415908.html">Gloria is currently working on package validation/relay in Bitc</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615848905 title="18:55" class=timestamp>18:55</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>b941590837ce678976d5afbad33450a57729cdb9</td></tr><tr bgcolor="#ffffff"><td><b><a href="/6c/95/6c954303.html">Robleh Ali is a founder of Wadagso Inc a specialist company off</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615848454 title="18:47" class=timestamp>18:47</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>6c954303c37f25e58ca39bc6201132742c7f5a2e</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/f6/3f/f63fdde3.html">Previously, Dr. Zou held various positions in China Investment </a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615847504 title="18:31" class=timestamp>18:31</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>f63fdde38ceff4e810ff74ddf0fa233d37644ed9</td></tr><tr bgcolor="#ffffff"><td><b><a href="/33/1c/331c9afd.html">Gloria is currently working on package validation/relay in Bitc</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615841088 title="16:44" class=timestamp>16:44</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>331c9afd39944e471036a56292a666b67345789e</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/94/3f/943f9188.html">Mr. Saylor is a technologist, entrepreneur, business executive,</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615841001 title="16:43" class=timestamp>16:43</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>943f91889a2d73339eadd1feba6efc4528de2e23</td></tr><tr bgcolor="#ffffff"><td><b><a href="/f7/a5/f7a516e2.html">Jimmy Song is a Bitcoin developer, educator and entrepreneur. H</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615840968 title="16:42" class=timestamp>16:42</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>f7a516e28dfb5b2d5d26978136159d47220c99ac</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/78/0e/780e6fa1.html">Robleh Ali is a founder of Wadagso Inc a specialist company off</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615840319 title="16:31" class=timestamp>16:31</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>780e6fa104292e27bd08c72347d1d525af4b9624</td></tr><tr bgcolor="#ffffff"><td><b><a href="/b7/e5/b7e52af2.html">title: Robleh Ali</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615838464 title="16:01" class=timestamp>16:01</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>b7e52af2ed00a5402c910b0cba445efcd2a82f4f</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/3b/7e/3b7e87b2.html">sha512.js</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615650867 title="03/13" class=timestamp>03/13</span><!-- / timestamp.template --></td><td>-</td><td>-</td><td class=advanced>3b7e87b28588bd9410425716f6a02b6324d01629</td></tr><tr bgcolor="#ffffff"><td><b><a href="/c0/14/c014e677.html">Mining Team, Galaxy Digital</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615846615 title="18:16" class=timestamp>18:16</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>c014e677e54f7a8e88c0c00eaab6c2e0a5657402</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/59/d5/59d570ad.html">Chief Marketing Officer, NiceHash</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615846613 title="18:16" class=timestamp>18:16</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>59d570ad15388b8643f5a5bf6fa45b19d166aee8</td></tr><tr bgcolor="#ffffff"><td><b><a href="/5b/62/5b625e55.html">Co-Founder and CEO, Sia</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615846610 title="18:16" class=timestamp>18:16</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>5b625e55e2dffc8cb2d89194b3bb560057dbcc66</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/e4/83/e4833d92.html">Director on the Global Digital Markets desk, BlockFi</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615846607 title="18:16" class=timestamp>18:16</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>e4833d926e7a087501ddffbf6b610e7ee1f1ba46</td></tr><tr bgcolor="#ffffff"><td><b><a href="/55/7d/557d8670.html">Director, Bitcoin Mining at Fidelity Investments</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615846603 title="18:16" class=timestamp>18:16</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>557d867024a2b019891e30ad7a7e7d93500e4a5f</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/d7/0b/d70ba2e6.html">CTO at Avanti Bank &amp; Trust</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615846600 title="18:16" class=timestamp>18:16</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>d70ba2e6a0a32ddd848e03f3d1c611c6f84f04c2</td></tr><tr bgcolor="#ffffff"><td><b><a href="/4e/18/4e18fe3e.html">Founder, Mensa's Bitcoin Special Interest Group</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615841622 title="16:53" class=timestamp>16:53</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>4e18fe3e9e36633e5e7ae437d8bf96704d128a0d</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/bf/32/bf328036.html">Co-founder &amp; CFO, Luxor Mining</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615841617 title="16:53" class=timestamp>16:53</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>bf328036a6a72561e5b5e729602f88ad17917b11</td></tr><tr bgcolor="#ffffff"><td><b><a href="/e3/7a/e37a5cc2.html">Senior Vice President, Boston Federal Reserve</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615841614 title="16:53" class=timestamp>16:53</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>e37a5cc2203a333acdc8ffaf3c1fc1f172dbdeda</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/d7/76/d7769760.html">Bitcoin Core Developer</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615841610 title="16:53" class=timestamp>16:53</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>d77697609b29232d57fb68e92201a10daf908d4f</td></tr><tr bgcolor="#ffffff"><td><b><a href="/7c/e0/7ce0af9b.html">Founder of Wadagso Inc</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615841600 title="16:53" class=timestamp>16:53</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>7ce0af9bc3b390015f9b1a467f9f78c25572266d</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/06/1e/061e4f05.html">Growth Lead, Kraken</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615841598 title="16:53" class=timestamp>16:53</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>061e4f05e0fdbdf453315ab0b317862add0f3394</td></tr><tr bgcolor="#ffffff"><td><b><a href="/6d/33/6d33c2d7.html">DCI researcher, co-inventor of the Lightning Network, Bitcoin developer working on scalability</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615840425 title="16:33" class=timestamp>16:33</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>6d33c2d71f2a67f117c162d2e740bbc29788faf8</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/10/5d/105dd8f5.html">Chief Economist of Wanxiang Blockchain</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615840419 title="16:33" class=timestamp>16:33</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>105dd8f5d515f5e5cc7481fbbbd5d299248635a5</td></tr><tr bgcolor="#ffffff"><td><b><a href="/75/6b/756bb6b6.html">CISO of ShapeShift, President of C4</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615840415 title="16:33" class=timestamp>16:33</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>756bb6b6c9067ed0ec3d2c9f86605bf865c9e2d4</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/31/f3/31f385b9.html">Head of Research, Chainalysis Inc.</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615840412 title="16:33" class=timestamp>16:33</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>31f385b95e4cdd48983dc42d6b51a8b78f865465</td></tr><tr bgcolor="#ffffff"><td><b><a href="/ff/3f/ff3fa51e.html">Creator, What Bitcoin Did Podcast</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615840409 title="16:33" class=timestamp>16:33</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>ff3fa51e38ab70f08359da32abfb26fba269430b</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/c3/3e/c33e7120.html">Researcher at Norwegian University of Science and Technology</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615840405 title="16:33" class=timestamp>16:33</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>c33e7120784c999f515ff615c7de8a01a8cf09d0</td></tr><tr bgcolor="#ffffff"><td><b><a href="/1b/1e/1b1e627b.html">Engineer, Chaincode Labs</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615839501 title="16:18" class=timestamp>16:18</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>1b1e627b3e2f3f9717ab1b2d0b926f633c3244be</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/3c/f8/3cf883fb.html">Developer</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615839492 title="16:18" class=timestamp>16:18</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>3cf883fb321275e21a3636bcc8c3ed24412f0f7b</td></tr><tr bgcolor="#ffffff"><td><b><a href="/fe/a8/fea8cfa7.html">US Operations &amp; Data Analytics Lead, Kaiko</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615839484 title="16:18" class=timestamp>16:18</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>fea8cfa7e6d290f92542d26997b293a5bf51237e</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/72/3d/723de7b9.html">Founder &amp; Developer, Lightning Network</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615839473 title="16:17" class=timestamp>16:17</span><!-- / timestamp.template --></td><td>-</td><td>1</td><td class=advanced>723de7b9becd8ffff2e045448905e3a7e105443f</td></tr><tr bgcolor="#ffffff"><td><b><a href="/00/c1/00c12478.html">Bitcoin Developer</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615839496 title="16:18" class=timestamp>16:18</span><!-- / timestamp.template --></td><td>-</td><td>2</td><td class=advanced>00c124781875dc784e317fdba2f5b445469fb5aa</td></tr><tr bgcolor="#e0e0e0"><td><b><a href="/5f/e7/5fe70773.html">Chairman of the Board of Directors and Chief Executive Officer of MicroStrategy, Inc.</a></b></td><td>-</td><td><!-- timestamp.template --><span epoch=1615839469 title="16:17" class=timestamp>16:17</span><!-- / timestamp.template --></td><td>-</td><td>2</td><td class=advanced>5fe707737fea2cb19c4ecbb6c3cf69f67509e62e</td></tr></tbody>

		
	</table>
</font>
<!-- / window/standard.template -->
<a name=73ec79bc></a><pre class=advanced><br><hr>SELECT
	item_title,
	author_key,
	add_timestamp,
	item_score,
	child_count,
	file_hash
FROM
	item_flat
ORDER BY
	child_count ASC,
	add_timestamp DESC
LIMIT 250</pre></main>
<hr>
<img src="/p.gif" alt="" height=1 width=1>
<!-- back_to_top_button.template -->
<a
    href="#"
    onclick="if (window.scrollTo) { window.scrollTo(0, 0); return false; }"
    title="Back to top"
    id=aBackToTop
    style="
        position: fixed;
        right: 5pt;
        bottom: 5pt;
        background-color: #f0f0d0;
        border: 5pt;
        padding: 5pt;
        border-radius: 5pt;
        text-decoration: none;
    "
>^^</span></a>
<!-- / back_to_top_button.template -->
<!-- InjectJs: settings utils timestamp fresh dragging -->

<!-- html/utils/scriptinject.template -->
<script language=javascript><!--
// == begin settings.js

var showAdvancedLastAction = '';
var showBeginnerLastAction = '';
var showMeaniesLastAction = '';
var showAdminLastAction = '';
var showTimestampsLastAction = '';

var timerShowAdvanced;

function SetElementVisible (element, displayValue, bgColor, borderStyle) { // sets element's visible status based on tag type
// displayValue = 'none' or 'initial'
// 	when 'initial', will try to substitute appropriate default for tag type
// also sets background color
// used for hiding/showing and highlighting beginner, advanced element classes on page.

    //alert ('DEBUG: \nelement:' + element + "\ndisplayValue:" + displayValue + "\nbgColor:" + bgColor + "\nborderStyle:" + borderStyle + "\n");

	if (bgColor) {
		// background color
		if (bgColor == 'initial') {
			bgColor = '#c0c0c0';
		}
		element.style.backgroundColor = bgColor;
		// this may cause issues in some themes
	}

	// depending on element type, we set different display style
	// block, table-row, table-cell, or default of 'initial'
	if (displayValue == 'initial' && (element.nodeName == 'P' || element.nodeName == 'H3' || element.nodeName == 'FIELDSET' || element.nodeName == 'HR')) {
		element.style.display = 'block';
	} else if (displayValue == 'initial' && element.nodeName == 'TR') {
		element.style.display = 'table-row';
	} else if (displayValue == 'initial' && (element.nodeName == 'TH' || element.nodeName == 'TD')) {
		if (element.innerHTML != '') {
			element.style.display = 'table-cell';
		} else {
			element.style.display = 'none'; // empty table cells display = none #why?
		}
	} else {
		if (displayValue == 'initial') {
			displayValue = 'inline';
		}
		element.style.display = displayValue;
		if (borderStyle) {
			// border style
			element.style.border = borderStyle;
			//element.style.borderRadius = '3pt';
		}
	}

	return 1;
} // SetElementVisible()

function ShowAll (t, container) { // t = clicked link ; container = document by default ; shows all elements, overriding settings
// admin elements are excluded. only beginner, advanced class elements are shown
	var gt = unescape('%3E');

	if (!container) {
		container = document;
	}

	var isMore = 1;
	if (t.innerHTML == 'Less') {
		// when without accesskey
		t.innerHTML = 'More';
		isMore = 0;
	}
	if (t.innerHTML == 'Less (<u' + gt + 'O</u' + gt + ')') {
		// when with accesskey
		t.innerHTML = 'M<u' + gt + 'o</u' + gt + 're';
		isMore = 0;
	}

    if (isMore && container.getElementsByClassName) {
		if (t.innerHTML == 'More') {
			// without accesskey
			t.innerHTML = 'Less';
		}
		if (t.innerHTML == 'M<u' + gt + 'o</u' + gt + 're') {
			// with accesskey
			t.innerHTML = 'Less (<u' + gt + 'O</u' + gt + ')';
		}

        var display;
        display = 'initial';

        var elements = container.getElementsByClassName('advanced');
        for (var i = 0; i < elements.length; i++) {
            SetElementVisible(elements[i], display, '#ffe0e0', 0);
        }
        elements = container.getElementsByClassName('beginner');
        for (var i = 0; i < elements.length; i++) {
            SetElementVisible(elements[i], display, '#f0f0d0', 0);
        }
        elements = container.getElementsByClassName('expand');
        for (var i = 0; i < elements.length; i++) {
            SetElementVisible(elements[i], 'none', '', 0);
        }

        if (timerShowAdvanced) {
            clearTimeout(timerShowAdvanced);
        }
		//timerShowAdvanced = setTimeout('ShowAdvanced(1);', 10000);
		//
		//if (t && t.getAttribute('onclick')) {
		//t.setAttribute('onclick', '');
		//}
		//if (window.ArrangeAll) {
		//	ArrangeAll();
		//}

        return false;
    } else {
    	ShowAdvanced(1);

    	return false;
	}

    return true;
} // ShowAll()

function ShowAdvanced (force, container) { // show or hide controls based on preferences
//handles class=advanced based on 'show_advanced' preference
//handles class=beginner based on 'beginner' preference
//force parameter
// 1 = does not re-do setTimeout (called this way from checkboxes)
// 0 = previous preference values are remembered, and are not re-done (called by timer)

	//alert('DEBUG: ShowAdvanced(' + force + ')');

	if (!container) {
		container = document;
	}

	if (document.getElementById && window.localStorage && container.getElementsByClassName) {
		//alert('DEBUG: ShowAdvanced: feature check passed!');
		///////////

		var displayTimestamps = '0';
		if (GetPrefs('expert_timestamps')) {
			displayTimestamps = 1;
		}
		if (force || window.showTimestampsLastAction != displayTimestamps) {
			//ShowTimestamps();
			window.showTimestampsLastAction = displayTimestamps;
		}

		var displayAdmin = 'none'; // not voting by default
		if (GetPrefs('show_admin') == 1) { // check value of show_admin preference
			displayAdmin = 'initial'; // display
		}
		if (force || showAdminLastAction != displayAdmin) {
			var elemAdmin = container.getElementsByClassName('admin');

			for (var i = 0; i < elemAdmin.length; i++) {
				SetElementVisible(elemAdmin[i], displayAdmin, 0, 0);
			}
		}

		var displayValue = 'none'; // hide by default
		if (GetPrefs('show_advanced') == 1) { // check value of show_advanced preference
			displayValue = 'initial'; // display
		}

		var bgColor = 'initial';
		if (GetPrefs('advanced_highlight') == 1) { // check value of advanced_highlight preference
			bgColor = '#ffe0e0'; // advanced_highlight
		}

		if (force || showAdvancedLastAction != (displayValue + bgColor)) {
			// thank you stackoverflow
			var divsToHide = container.getElementsByClassName("advanced"); //divsToHide is an array #todo nn3 compat
			for (var i = 0; i < divsToHide.length; i++) {
				//divsToHide[i].style.visibility = "hidden"; // or
				SetElementVisible(divsToHide[i], displayValue, bgColor, 0);
			}
//			var clock = document.getElementById('txtClock');
//			if (clock) {
//			    SetElementVisible(clock, displayValue, bgColor, 0);
//			}
			showAdvancedLastAction = displayValue + bgColor;
		}

		displayValue = 'initial'; // show by default
		if (GetPrefs('beginner') == 0) { // check value of beginner preference
			displayValue = 'none';
		}

		bgColor = 'initial';
		if (GetPrefs('beginner_highlight') == 1) { // check value of beginner preference
			bgColor = '#f0f0d0'; // beginner_highlight
		}

		if (force || showBeginnerLastAction != displayValue + bgColor) {
			var divsToShow = container.getElementsByClassName('beginner');//#todo nn3 compat

			for (var i = 0; i < divsToShow.length; i++) {
				SetElementVisible(divsToShow[i], displayValue, bgColor, 0);
			}
			showBeginnerLastAction = displayValue + bgColor;
		}
//
//		if (window.freshTimeoutId) {
//			// reset the page change notifier state
//			clearTimeout(window.freshTimeoutId);
//
//			if (GetPrefs('notify_on_change')) {
//				// check if page has changed, notify user if so
//				if (window.EventLoop) {
//					EventLoop();
//				}
//			}
//		}

		if (window.setAva) {
			setAva(); // #todo caching similar to above
		}

		//if (!force) {
			//if (timerShowAdvanced) {
			//	clearTimeout(timerShowAdvanced);
			//}
			//timerShowAdvanced = setTimeout('ShowAdvanced()', 3000);
		//}

		//SettingsOnload();

	} else {
		//alert('DEBUG: ShowAdvanced: feature check FAILED!');
		//alert('DEBUG: window.localStorage: ' + window.localStorage + '; document.getElementsByClassName: ' + document.getElementsByClassName);
	}

	//alert('DEBUG: ShowAdvanced: returning false');
	return false;
} // ShowAdvanced()

function GetPrefs (prefKey) { // get prefs value from localstorage
	// GetConfig {
	// GetSetting {
	//alert('debug: GetPrefs(' + prefKey + ')');
	if (window.localStorage) {
		var nameContainer = 'settings';
		{ // settings beginning with gtgt go into separate container
			var gt = unescape('%3E');
			if (prefKey.substr(0, 2) == gt+gt) {
				nameContainer = 'voted';
			}
		}
		var currentPrefs = localStorage.getItem(nameContainer);

		var prefsObj;
		if (currentPrefs) {
			prefsObj = JSON.parse(currentPrefs);
		} else {
			prefsObj = Object();
		}
		var prefValue = prefsObj[prefKey];

		if (!prefValue && prefValue != 0) {
			// these settings default to 1/true:
			if (
				prefKey == 'beginner' ||
				prefKey == 'beginner_highlight' ||
				prefKey == 'notify_on_change'
			) {
				prefValue = 1;
			}
			if (
				prefKey == 'show_advanced' ||
				prefKey == 'show_admin' ||
				prefKey == 'draggable'
			) {
				prefValue = 0;
			}
		}

		SetPrefs(prefKey, prefValue);

		return prefValue;
	}

	//alert('debug: GetPrefs: fallthrough, returning false');
	return false;
} // GetPrefs()

function SetPrefs (prefKey, prefValue) { // set prefs key prefKey to value prefValue
    //alert('DEBUG: SetPrefs(' + prefKey + ', ' + prefValue + ')');

	if (prefKey == 'show_advanced' || prefKey == 'beginner' || prefKey == 'show_admin') {
		//alert('DEBUG: SetPrefs: setting cookie to match LocalStorage');
		if (window.SetCookie) {
			SetCookie(prefKey, (prefValue ? 1 : 0));
		}
	}

	if (window.localStorage) {
		var nameContainer = 'settings';
		var gt = unescape('%3E');
		if (prefKey.substr(0, 2) == gt+gt) {
			nameContainer = 'voted';
		}

		var currentPrefs = localStorage.getItem(nameContainer);
		var prefsObj;
		if (currentPrefs) {
			prefsObj = JSON.parse(currentPrefs);
		} else {
			prefsObj = Object();
		}
		prefsObj[prefKey] = prefValue;

		var newPrefsString = JSON.stringify(prefsObj);
		localStorage.setItem(nameContainer, newPrefsString);
		return 0;
	}

	return 1;
}

function SaveCheckbox (ths, prefKey) { // saves value of checkbox, toggles affected elements
// id = id of pane to hide or show; not required
// ths = "this" of calling checkbox)
// prefKey = key of preference value to set with checkbox
//
// this function is a bit of a mess, could use a refactor #todo

	//alert('DEBUG: SaveCheckbox(' + ths + ',' + prefKey);

	var checkboxState = (ths.checked ? 1 : 0);
	//alert('DEBUG: checkboxState = ' + checkboxState);

	// saves checkbox's value as 0/1 value to prefs(prefKey)
	SetPrefs(prefKey, (ths.checked ? 1 : 0));


	if (prefKey == 'draggable') {
		if (ths.checked) {
			DraggingInit(0);
		} else {
			//#todo
		}
	}

	//alert('DEBUG: after SetPrefs, GetPrefs(' + prefKey + ') returns: ' + GetPrefs(prefKey));

	// call ShowAdvanced(1) to update ui appearance
	// ShowAdvanced(1);

	return 1;
}

function SetInterfaceMode (ab) { // updates several settings to change to "ui mode" (beginner, advanced, etc.)
    //alert('DEBUG: SetInterfaceMode(' + ab + ')');

	if (window.localStorage && window.SetPrefs) {
		if (ab == 'beginner') {
			SetPrefs('show_advanced', 0);
			SetPrefs('advanced_highlight', 0);
			SetPrefs('beginner', 1);
			SetPrefs('beginner_highlight', 1);
			SetPrefs('notify_on_change', 1);
			SetPrefs('show_admin', 0);
			SetPrefs('write_enhance', 0);
			SetPrefs('write_autosave', 0);
			SetPrefs('expert_timestamps', 0);
			SetPrefs('draggable', 0);
//			SetPrefs('sign_by_default', 1);
		} else if (ab == 'intermediate') {
			SetPrefs('show_advanced', 1);
			SetPrefs('advanced_highlight', 1);
			SetPrefs('beginner', 1);
			SetPrefs('beginner_highlight', 1);
			SetPrefs('notify_on_change', 1);
//            SetPrefs('show_admin', 0);
		} else if (ab == 'expert') {
			SetPrefs('show_advanced', 1);
			SetPrefs('advanced_highlight', 0);
			SetPrefs('beginner', 0);
			SetPrefs('beginner_highlight', 0);
			SetPrefs('notify_on_change', 1);
//            SetPrefs('show_admin', 0);
// 		} else if (ab == 'minimal') {
// 			SetPrefs('show_advanced', 0);
// 			SetPrefs('advanced_highlight', 0);
// 			SetPrefs('beginner', 0);
// 			SetPrefs('beginner_highlight', 0);
// 			SetPrefs('notify_on_change', 0);
// //            SetPrefs('show_admin', 0);
// 		} else if (ab == 'operator') {
//             SetPrefs('show_admin', 1);
		}

		ShowAdvanced(1);

        //alert('DEBUG: window.SetPrefs was found, and ShowAdvanced(1) was called');

		return false;
	}

	//alert('DEBUG: returning true');

	return true;
}


function LoadCheckbox (c, prefKey) { // updates checkbox state to reflect settings
// c = checkbox
// prefKey = key of preference value
//
	//alert('DEBUG: LoadCheckbox(' + c + ',' + prefKey);
	var checkboxState = GetPrefs(prefKey);
	//alert('DEBUG: checkboxState = ' + checkboxState);

	if (c && c.checked != (checkboxState ? 1 : 0)) {
		c.checked = (checkboxState ? 1 : 0);
	}

	return 1;
}


function SettingsOnload () { // onload function for settings page
	//alert('debug: SettingsOnload() begin');

	if (document.getElementById) {
	// below is code which sets the checked state of settings checkboxes
	// based on settings state
		var pane;

		//LoadCheckbox(document.getElementById('chkSignByDefault'), 'sign_by_default');
		LoadCheckbox(document.getElementById('chkDraggable'), 'draggable');
		LoadCheckbox(document.getElementById('chkShowAdmin'), 'show_admin');
		LoadCheckbox(document.getElementById('chkShowAdvanced'), 'show_advanced');
		LoadCheckbox(document.getElementById('chkWriteEnhance'), 'write_enhance');
		LoadCheckbox(document.getElementById('chkWriteEnhance'), 'write_enhance');
		LoadCheckbox(document.getElementById('chkExpertTimestamps'), 'expert_timestamps');

		//if (GetPrefs('sign_by_default') == 1) {
		//	var cbM = document.getElementById('chkSignByDefault');
		//	if (cbM) {
		//		cbM.checked = 1;
		//	}
		//}

	}

	//alert('debug: SettingsOnload: returning false');
	return false;
} // SettingsOnload()

if (window.EventLoop) {
	window.eventLoopShowAdvanced = 1;
} else {
	ShowAdvanced();
}

// == end settings.js


// == begin utils.js

// begin html escape hack (credit stacko)
// only works with createElement #backlog
if (document.createElement) {
	var escapeTA = document.createElement('textarea');
}
function escapeHTML(html) {
	if (window.escapeTA) {
		escapeTA.textContent = html;
		return escapeTA.innerHTML;
	}
}
function unescapeHTML(html) {
	if (window.escapeTA) {
		escapeTA.innerHTML = html;
		return escapeTA.textContent;
	}
}
// end html escape hack

function OnLoadEverything () { // checks for each onLoad function and calls it
// keywords: OnLoadAll BodyOnLoad body onload body.onload
// typically called from body.onload
	//alert('DEBUG: OnLoadEverything() begins');

	if (window.setClock) {
		//alert('DEBUG: OnLoadEverything: setClock()');
		window.eventLoopSetClock = 1;
		setClock();
	}
	if (window.ItsYou) {
		//alert('DEBUG: OnLoadEverything: ItsYou()');
		ItsYou();
	}
	if (window.ShowTimestamps) {
		//alert('DEBUG: OnLoadEverything: ShowTimestamps()');
		window.eventLoopShowTimestamps = 1;
	}
	if (window.SettingsOnload) {
		//alert('DEBUG: OnLoadEverything: SettingsOnload()');
		SettingsOnload();
	}
	if (window.ProfileOnLoad) {
		//alert('DEBUG: OnLoadEverything: ProfileOnLoad()');
		ProfileOnLoad();
	}
	if (window.WriteOnload) {
		//alert('DEBUG: OnLoadEverything: WriteOnload()');
		WriteOnload();
	}
	if (window.ShowAdvanced) {
		//alert('DEBUG: OnLoadEverything: ShowAdvanced()');
		window.eventLoopShowAdvanced = 1;
		ShowAdvanced(0);
	}
	if (window.SearchOnload) {
		//alert('DEBUG: OnLoadEverything: SearchOnload()');
		SearchOnload();
	}
	if (window.UploadAddImagePreviewElement) {
		//alert('DEBUG: OnLoadEverything: UploadAddImagePreviewElement()');
		UploadAddImagePreviewElement();
	}
	if (
		(
			window.location.href &&
			window.location.href.indexOf('write') != -1 ||
			window.location.hash.indexOf('reply') != -1
		) &&
		document.compose &&
		document.compose.comment &&
		document.compose.comment.focus
	) {
		//alert('DEBUG: OnLoadEverything: document.compose.comment.focus()()');
		document.compose.comment.focus();
	}
	if (window.location.href && (window.location.href.indexOf('search') != -1) && document.search.q) {
		//alert('DEBUG: OnLoadEverything: document.search.q.focus()');
		document.search.q.focus();
	}
//	if (window.DraggingInit && GetPrefs('draggable')) {
	if (window.DraggingInit) {
		//alert('DEBUG: OnLoadEverything: DraggingInit()');
		if (window.location.href.indexOf('desktop') != -1) {
			DraggingInit(1);
		} else {
			DraggingInit(0);
		}
	}
	if (window.EventLoop) {
		//alert('DEBUG: OnLoadEverything: EventLoop()');
		if (window.CheckIfFresh) {
			window.eventLoopFresh = 1;
		}
		window.eventLoopEnabled = 1
		EventLoop();
	}
	if (window.HideLoadingIndicator) {
		//alert('DEBUG: OnLoadEverything: HideLoadingIndicator()');
		HideLoadingIndicator();
	}

	// everything is set now, start event loop
	//
} // OnLoadEverything()

function ShowPreNavigateNotification () {
	//alert('DEBUG: ShowPreNavigateNotification() begin');
	document.title = 'Meditate...';
	//document.body.style.opacity="0.8";

	if (document.getElementById) {
		var ariaAlert;
		ariaAlert = document.getElementById('ariaAlert');

		if (!ariaAlert) {
			ariaAlert = document.createElement('p');
			ariaAlert.setAttribute('role', 'alert');
			ariaAlert.setAttribute('id', 'ariaAlert');
			ariaAlert.innerHTML = 'Meditate...';
			ariaAlert.style.opacity = '1';
			ariaAlert.style.zIndex = '1337';
			//document.body.appendChild(ariaAlert);
			document.body.insertBefore(ariaAlert, document.body.firstChild);
		}
	}

	return ''; // true would show a confirmation
}

function EventLoop () { // for calling things which need to happen on a regular basis
// sets another timeout for itself when done
// replaces several independent timeouts
// #backlog add secondary EventLoopWatcher timer which ensures this one runs when needed

	var d = new Date();
	var eventLoopBegin = d.getTime();

	//alert('DEBUG: EventLoop: eventLoopBegin = ' + eventLoopBegin + ' - window.eventLoopPrevious = ' + window.eventLoopPrevious + ' = ' + (eventLoopBegin - window.eventLoopPrevious));

	if (!window.eventLoopPrevious) {
		window.eventLoopPrevious = 1;
	}

	if (window.eventLoopSetClock && window.setClock) {
		setClock();
	}

	if (10000 < (eventLoopBegin - window.eventLoopPrevious)) {
		window.eventLoopPrevious = eventLoopBegin;

		if (window.flagUnloaded) {
			if (window.ShowPreNavigateNotification) {
				ShowPreNavigateNotification();
			}
		}

		//return;
		// uncomment to disable event loop
		// makes js debugging easier

		if (window.eventLoopShowTimestamps && window.ShowTimestamps) {
			if (13000 < (eventLoopBegin - window.eventLoopShowTimestamps)) {
				ShowTimestamps();
				window.eventLoopShowTimestamps = eventLoopBegin;
			} else {
				// do nothing
			}
		}

		if (window.eventLoopDoAutoSave && window.DoAutoSave) {
			if (5000 < (eventLoopBegin - window.eventLoopDoAutoSave)) { // autosave interval
				DoAutoSave();
				window.eventLoopDoAutoSave = eventLoopBegin;
			} else {
				// do nothing
			}
		}

		if (window.eventLoopShowAdvanced && window.ShowAdvanced) {
			ShowAdvanced();
		}

		if (window.eventLoopFresh && window.CheckIfFresh) {
			if (10000 < (eventLoopBegin - window.eventLoopFresh)) {
				//window.eventLoopFresh = eventLoopBegin;
				if (GetPrefs('notify_on_change')) {
					CheckIfFresh();
				}
				window.eventLoopFresh = eventLoopBegin;
			}
		}
	} // 10000 < (eventLoopBegin - window.eventLoopPrevious)

	if (window.eventLoopEnabled) {
		var d = new Date();
		var eventLoopEnd = d.getTime();
		var eventLoopDuration = eventLoopEnd - eventLoopBegin;
		//document.title = eventLoopDuration; // for debugging performance

		if (window.timeoutEventLoop) {
			clearTimeout(window.timeoutEventLoop);
		}

		if (100 < eventLoopDuration) {
			// if loop went longer than 100ms, run every 3 seconds or more
			eventLoopDuration = eventLoopDuration * 30;
		} else {
			// otherwise run every 1 second
			eventLoopDuration = 1000;
		}
		//document.title = eventLoopDuration; // for debugging performance

		window.timeoutEventLoop = setTimeout('EventLoop()', eventLoopDuration);
	} // window.eventLoopEnabled

} // EventLoop()

function UrlExists(url) { // checks if url exists
// todo use async
// todo how to do pre-xhr browsers?
    //alert('DEBUG: UrlExists(' + url + ')');

	if (window.XMLHttpRequest) {
	    //alert('DEBUG: UrlExists: window.XMLHttpRequest check passed');

		var http = new XMLHttpRequest();
		http.open('HEAD', url, false);
		//http.timeout = 5000; //#xhr.timeout
		http.send();
		var httpStatusReturned = http.status;

		//alert('DEBUG: UrlExists: httpStatusReturned = ' + httpStatusReturned);

		return (httpStatusReturned == 200);
	}
}
//
//function UrlExists2(url, callback) { // checks if url exists
//// todo use async and callback
//// todo how to do pre-xhr browsers?
//    //alert('DEBUG: UrlExists(' + url + ')');
//
//	if (window.XMLHttpRequest) {
//	    //alert('DEBUG: UrlExists: window.XMLHttpRequest check passed');
//
//        var xhttp = new XMLHttpRequest();
//        xhttp.onreadystatechange = function() {
//    if (this.readyState == 4 && this.status == 200) {
//       // Typical action to be performed when the document is ready:
//       document.getElementById("demo").innerHTML = xhttp.responseText;
//    }
//};
//xhttp.open("GET", "filename", true);
//xhttp.send();
//
//
//
//		var http = new XMLHttpRequest();
//		http.open('HEAD', url, false);
//		http.send();
//		var httpStatusReturned = http.status;
//
//		//alert('DEBUG: UrlExists: httpStatusReturned = ' + httpStatusReturned);
//
//		return (httpStatusReturned == 200);
//	}
//}

function DisplayStatus(status) {
	if (document.getElementById) {
		var statusBar = document.getElementById('status');

	}
}

function DownloadAsTxt(filename, text) {
    var element = document.createElement('a');

    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
    element.setAttribute('download', filename);

    element.style.display = 'none';
    document.body.appendChild(element);

    element.click();

    document.body.removeChild(element);
}


function displayNotification (strMessage, thisButton) { // adds notificatin to page
// used for loading indicator bar (to top of page, depending on style)
// also used for "creating profile" and "already voted" notifications
	var spanNotification = document.createElement('span');
	spanNotification.setAttribute('class', 'notification');
	spanNotification.setAttribute('role', 'alert');
	spanNotification.setAttribute('onclick', 'if (this.remove) { this.remove() } return false;');
	spanNotification.innerHTML = strMessage;

	if (thisButton) {
		thisButton.parentNode.appendChild(spanNotification);
		thisButton.after(spanNotification);
	} else {
		document.body.appendChild(spanNotification);
	}
} // displayNotification()

function newA (href, target, innerHTML, parent) { // makes new a element and appends to parent
	var newLink = document.createElement('a');
	if (href) { newLink.setAttribute('href', href); }
	if (target) { newLink.setAttribute('target', target); }
	if (innerHTML) { innernewLink.setAttribute('innerHTML', innerHTML); }
	parent.appendChild(newLink);
	return newLink;
}

function CollapseWin (t) { // collapses or expands window based on t's caption
// t is presumed to be clicked element's this, but can be any other element
// if t's caption is 'v', window is re-expanded
// if 'x' (or anything else) collapses window
// this is done by navigating up until a table is reached
// and then hiding the first class=content element within
// presumably a TR but doesn't matter really because SetElementVisible() is used
// pretty basic, but it works.
	if (t.innerHTML && t.firstChild) {
		if (t.firstChild.nodeName == 'FONT') {
			// small hack in case link has a font tag inside
			// the font tag is typically used to style the link a different color for older browsers
			t = t.firstChild;
		}
		var newVisible = 'initial';
		if (t.innerHTML == '}-{') { //#collapseButton
			t.innerHTML = '{-}'; // //#collapseButton
		} else {
			t.innerHTML = '}-{'; //#collapseButton
			newVisible = 'none';
		}
		if (t.parentElement) {
			var p = t;
			while (p.nodeName != 'TABLE') {
				p = p.parentElement;
				if (p.getElementsByClassName) {
					var content = p.getElementsByClassName('content');
					if (content.length) {
						SetElementVisible(content[0], newVisible);
						return false;
					}
				}
			}
		}
	}
	return true;
} // CollapseWin()

//function ChangeInputToTextarea (input) { // called by onpaste
////#input_expand_into_textarea
//	//#todo more sanity
//	if (!input) {
//		return '';
//	}
//
//	if (document.createElement) {
//		var parent = input.parentElement;
//		var textarea = document.createElement('textarea');
//		var cols = input.getAttribute('cols');
//		var name = input.getAttribute('name');
//		var id = input.getAttribute('id');
//		var rows = 5;
//		var width = cols + 'em';
//
//		textarea.setAttribute('name', name);
//		textarea.setAttribute('id', id);
//		textarea.setAttribute('cols', cols);
//		textarea.setAttribute('rows', rows);
//		//textarea.style.width = width;
//		textarea.innerHTML = input.value;
//
//		//parent.appendChild(t);
//		parent.insertBefore(textarea, input.nextSibling);
//		input.style.display = 'none';
//
//		textarea.focus();
//		textarea.selectionStart = textarea.innerHTML.length;
//		textarea.selectionEnd = textarea.innerHTML.length;
//
//		if (window.inputToChange) {
//			window.inputToChange = '';
//		}
//	}
//
//	return true;
//}

//
//function ConvertSubmitsToButtonsWithAccessKey (parent) {
//	if (!parent) {
//		//alert('DEBUG: ConvertSubmitsToButtons: warning: sanity check failed');
//		return '';
//	}
//
//	if (parent.getElementsByClassName) {
//		var buttons = parent.getElementsByClassName('btnSubmit');
//		// convert each submit to button with accesskey
//	} else {
//		//todo
//	}
//	return ''
//} // ConvertSubmitsToButtonsWithAccessKey()

// == end utils.js


// == begin timestamp.js

function LongAgo (seconds) { // returns string with time units
// takes seconds as parameter
// returns a string like "3 days ago" or "3 days from now"
	var flip = 0;
	if (seconds < 0) {
		flip = 1;
		seconds = 0 - seconds;
	}

	if (seconds < 60) {
		if (seconds != 1) {
			seconds = seconds + ' seconds';
		} else {
			seconds = seconds + ' second';
		}
	} else {
		seconds = Math.floor(seconds / 60);

		if (seconds < 60) {
			if (seconds != 1) {
				seconds = seconds + ' minutes';
			} else {
				seconds = seconds + ' minute';
			}
		} else {
			seconds = Math.floor(seconds / 60);

			if (seconds < 24) {
				if (seconds != 1) {
					seconds = seconds + ' hours';
				} else {
					seconds = seconds + ' hour';
				}
			} else {
				seconds = Math.floor(seconds / 24);

				if (seconds < 7) {
					if (seconds != 1) {
						seconds = seconds + ' days';
					} else {
						seconds = seconds + ' day';
					}
				} else {
					if (seconds < 30) {
						seconds = Math.floor(seconds / 7);
						if (seconds != 1) {
							seconds = seconds + ' weeks';
						} else {
							seconds = seconds + ' week';
						}
					} else {
						if (seconds < 365) {
							seconds = Math.floor(seconds / 30);

							if (seconds != 1) {
								seconds = seconds + ' months';
							} else {
								seconds = seconds + ' month';
							}
						} else {
							seconds = Math.floor(seconds / 365);
							if (seconds != 1) {
								seconds = seconds + ' years';
							} else {
								seconds = seconds + ' year';
							}
						}
					}
				}
			}
		}
	}

	if (flip) {
		return seconds + ' ago';
	}

	if (seconds != '0 seconds') {
		return seconds + ' from now';
	}

	return 'just now!';
}

function ShowTimestamps () { // finds any class=timestamp, updates its displayed time as needed
// currently requires getElementsByClassName()
// in the future, ie4+, nn4+, and others compat can be improved

	//alert('DEBUG: ShowTimestamps()');
	if (document.getElementsByClassName) {
		//alert('DEBUG: ShowTimestamps: document.getElementsByClassName feature check passed');
		var d = new Date();
		var curTime = Math.floor(d.getTime() / 1000);
		var changeLogged = 0;
		var showAdvancedMode = 0;

		if (window.GetPrefs) {
			if (GetPrefs('expert_timestamps')) {
				showAdvancedMode = 1;
			}
		}
	
		// find elements with class=timestamp
		var te = document.getElementsByClassName("timestamp");

		//alert('DEBUG: ShowTimestamps: class=timestamp elements found: ' + te.length);
		for (var i = 0; i < te.length; i++) {
			// loop through all the timestamp elements on the page
			if (!isNaN(te[i].getAttribute('epoch'))) {
				// element also has an attribute called 'epoch', and it is
				// a number, which would represent epoch seconds
				var secs = 0 - (curTime - te[i].getAttribute('epoch')); // number of seconds since epoch begin
				var longAgo = '';
				if (!showAdvancedMode) {
					longAgo = LongAgo(secs); // what the element's displayed value should be
				} else {
					longAgo = secs;
				}

				if (te[i].innerHTML != longAgo) {
					// element's content does not already equal what it should equal
					te[i].innerHTML = longAgo;
					if ((secs * (-1)) < 3600) {
						// less than an hour ago = bold
						te[i].style.fontWeight = 'bold';
					} else {
						te[i].style.fontWeight = '';
					}
					if ((secs * (-1)) < 86400) {
						// less than a day ago = highlight
						te[i].style.backgroundColor = '#ffc080';
					} else {
						te[i].style.backgroundColor = '';
					}
					changeLogged++; // count change logged
				}
			}
		}

		if (window.EventLoop) {
			// do nothing, EventLoop() will call us when needed
			return changeLogged;
		} else {
			// allow ShowTimestamps() to run decoupled from EventLoop()
			if (changeLogged) {
				setTimeout('ShowTimestamps()', 5000);
			} else {
				setTimeout('ShowTimestamps()', 15000);
			}
			return changeLogged;
		}
	}
} // ShowTimestamps()
//
//if (window.EventLoop) {
//	// do nothing, EventLoop() will take care of us
//} else {
//	// if no EventLoop(), we do it ourselves
//	ShowTimestamps();
//}

// == end timestamp.js


// == begin fresh.js
var freshClient;
//
//function ReplacePageWithNewContent () {
//	window.location.replace(window.newPageLocation);
//	document.open();
//	document.write(window.newPageContent);
//	document.close();
//
//	return 0;
//}
//
//function StoreNewPageContent () {
//	var xmlhttp = window.xmlhttp2;
//
//	if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
//		//alert('DEBUG: PingUrlCallbackReplaceCurrentPage() found status 200');
//		window.newPageContent = xmlhttp.responseText;
//		window.newPageLocation = xmlhttp.responseURL;
//
//		//window.location.replace(xmlhttp.responseURL);
////		document.open();
////		document.write(xmlhttp.responseText);
////		document.close();
//	}
//}
//
//function FetchNewPageContent (url) {
//	if (window.XMLHttpRequest) {
//		//alert('DEBUG: PingUrl: window.XMLHttpRequest was true');
//
//		var xmlhttp;
//		if (window.xmlhttp2) {
//			xmlhttp = window.xmlhttp2;
//		} else {
//			window.xmlhttp2 = new XMLHttpRequest();
//			xmlhttp = window.xmlhttp2;
//		}
//        xmlhttp.onreadystatechange = window.StoreNewPageContent;
//        xmlhttp.open("GET", url, true);
//		xmlhttp.setRequestHeader('Cache-Control', 'no-cache');
//        xmlhttp.send();
//
//        return false;
//	}
//}


function freshCallback() { // callback for requesting HEAD for current page
//alert('DEBUG: freshCallback() this.readyState = ' + this.readyState);

//	if (1 || this.readyState == this.HEADERS_RECEIVED) { // headers received -- what we've been waiting for
	if (
		document.getElementById &&
		this.readyState == this.HEADERS_RECEIVED ||
		this.status == 200
	) { // headers received -- what we've been waiting for
		// document.title = 'DEBUG: callback received 200';
	    //alert('DEBUG: freshCallback() this.readyState == this.HEADERS_RECEIVED');

		var eTag = freshClient.getResponseHeader("ETag"); // etag header contains page 'fingerprint'

		//alert('DEBUG: eTag = ' + eTag);

		if (eTag) { // if ETag header has a value
			if (window.myOwnETag) {
				if (eTag != window.myOwnETag) {
					if (eTag == window.lastEtag) { // if it's equal to the one we saved last time
						// no new change change
					} else {
						var freshUserWantsReload = 0;  // templated
						if (freshUserWantsReload) {
							// user wants reload
							//alert('DEBUG: user wants automatic page reload');
							location.reload();
						} else {
							// user doesn't want reload, just show notification
							//alert('DEBUG: user does not want automatic page reload, notify');
							window.lastEtag = eTag;

							var ariaAlert;
							ariaAlert = document.getElementById('ariaAlert');

							if (!ariaAlert) {
								//alert('DEBUG: ariaAlert created successfully');
								ariaAlert = document.createElement('p');
								ariaAlert.setAttribute('role', 'alert');
								ariaAlert.setAttribute('id', 'ariaAlert');
								ariaAlert.style.zIndex = '1337'; //#todo

								var txtUpdated = document.createTextNode('Page updated ');
								ariaAlert.appendChild(txtUpdated);

								//document.body.appendChild(ariaAlert);
								document.body.insertBefore(ariaAlert, document.body.firstChild);
								//window.newPageContent =
								//FetchNewPageContent(window.mypath + '?' + new Date().getTime());

								//ariaAlert.innerHTML = ariaAlert.innerHTML + '+';
								var d = new Date();
								var n = d.getTime();
								n = Math.ceil(n / 1000);

								var space = document.createElement('span');
								space.innerHTML = ' ';
								ariaAlert.appendChild(space);

								var a = document.createElement('a');
								a.setAttribute('id', 'freshAria');
								a.setAttribute('href', '#');
								a.setAttribute('onclick', 'location.reload()');
								ariaAlert.appendChild(a);

								var newTs = document.createElement('span');
								newTs.setAttribute('class', 'timestamp');
								newTs.setAttribute('epoch', n);
								newTs.setAttribute('id', 'freshTimestamp');
								newTs.innerHTML = 'just now!';
								a.appendChild(newTs);
							} // !ariaAlert

							if (window.freshTimeoutId) {
								clearTimeout(window.freshTimeoutId);
							}
							//window.eventLoopFresh = 0; // stop checking for updates

							if (document.title.substring(0, 2) != '! ') {
								document.title = '! ' + document.title;
							}
						} // NOT freshUserWantsReload
					} // lastEtag also didn't match
				} // eTag != window.myOwnETag
				else {
					//document.title = 'freshCallback: x ' + window.myOwnETag + ';' + new Date().getTime();
					if (window.freshTimeoutId) {
						clearTimeout(window.freshTimeoutId);
					}
					window.freshTimeoutId = setTimeout('CheckIfFresh()', 15000);
				}
			} // if (window.myOwnETag)
			else {
				window.myOwnETag = eTag;
			}
		} // if (eTag) // ETag header has value
	} // status == 200
	if (this.status == 404 && document.getElementById) {
		//alert('DEBUG: page has gone away on server (404)');
		var ariaAlert;
		ariaAlert = document.getElementById('ariaAlert');
		if (!ariaAlert) {
			ariaAlert = document.createElement('p');
			ariaAlert.setAttribute('role', 'alert');
			ariaAlert.setAttribute('id', 'ariaAlert');
			ariaAlert.style.zIndex = '1337'; //#todo
			ariaAlert.innerHTML = 'Page deleted';

			//document.body.appendChild(ariaAlert);
			document.body.insertBefore(ariaAlert, document.body.firstChild);
		}
		// window.eventLoopFresh = 0; // stop checking for updates
	} // status == 404

	return true;
} //freshCallback()

function CheckIfFresh () {
	var d = new Date();
	//alert('debug: CheckIfFresh: ' + d.getTime());

	var freshCheckRecent = window.freshCheckRecent;
	if (freshCheckRecent) {
		//alert('debug: CheckIfFresh: freshCheckRecent = ' + freshCheckRecent);
		var d = new Date();
		var curTime = d.getTime();
		if (curTime < freshCheckRecent + 3000) {
			return true;
		}
	}
	//alert('debug: CheckIfFresh: checkpoint passed');

	var d = new Date();
	window.freshCheckRecent = d.getTime();

	var xhr = null;
	if (window.XMLHttpRequest){
    	xhr = new XMLHttpRequest();
    }
    else {
    	if (window.ActiveXObject) {
    		xhr = new ActiveXObject("Microsoft.XMLHTTP");
		}
    }

	if (xhr) {
		var mypath = window.mypath;

		if (!mypath) {
			mypath = window.location;
			window.mypath = mypath;
		}

		freshClient = xhr;

		if (0 && mypath.toString().indexOf('?') == -1) {
			// this ensures no caching, but may cause other problems
			freshClient.open("HEAD", mypath + '?' + d.getTime(), true);
		} else {
			freshClient.open("HEAD", mypath, true);
		}

    	//freshClient.timeout = 5000; //#xhr.timeout
		freshClient.setRequestHeader('Cache-Control', 'no-cache');
		freshClient.onreadystatechange = freshCallback;

		freshClient.send();
	}

	return true;
} // CheckIfFresh()
//
//if (window.GetPrefs) {
//	var needNotify = (GetPrefs('notify_on_change') ? 1 : 0);
//	if (needNotify == 1) { // check value of notify_on_change preference
//		if (window.EventLoop) {
//			EventLoop();
//		} else {
//			CheckIfFresh();
//		}
//	}
//}

//alert('DEBUG: fresh.js');

// == end fresh.js


/* dragging.js */
// allows dragging of boxes on page with the mouse pointer

/*
	known issues:
	* problem: syntax errors on older browsers like netscape
	  solution: remove nested function declarations
	* problem: no keyboard alternative at this time
	  solution: somehow allow moving through windows and moving them with keyboard
	* problem: slow and janky, needs more polish
	  solution: optimizations
*/

// props https://www.w3schools.com/howto/howto_js_draggable.asp

/*
		#mydiv {
    	  	position: absolute;
     		z-index: 9;
    	}
    	
    	#mydivheader {
    		this is just the titlebar
    	}
*/

window.draggingZ = 0; // keeps track of the topmost box's zindex
// incremented whenever dragging is initiated, that way element pops to top

function dragElement (elmnt, header) {
	//alert('DEBUG: dragElement');

	var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
	if (header) {
		// if present, the header is where you move the DIV from:
		header.onmousedown = dragMouseDown;
	} else {
		// otherwise, move the DIV from anywhere inside the DIV:
		elmnt.onmousedown = dragMouseDown;
	}

	// set element's position based on its initial box model position
	var rect = elmnt.getBoundingClientRect();
	elmnt.style.position = 'absolute';
	elmnt.style.top = (rect.top) + "px";
	elmnt.style.left = (rect.left) + "px";

    //console.log(rect.top, rect.right, rect.bottom, rect.left);
	//elmnt.style.position = 'absolute';
	//elmnt.style.z-index = '9';

	function dragMouseDown(e) {
		//alert('DEBUG: dragMouseDown');
		elmnt.style.zIndex = ++window.draggingZ;

		e = e || window.event;
		e.preventDefault();
		// get the mouse cursor position at startup:
		pos3 = e.clientX;
		pos4 = e.clientY;

		document.onmouseup = closeDragElement;
		// call a function whenever the cursor moves:
		document.onmousemove = elementDrag;
	}

	function elementDrag(e) {
		//alert('DEBUG: elementDrag');
		//document.title = pos1 + ',' + pos2 + ',' + pos3 + ',' + pos4;
		//document.title = e.clientX + ',' + e.clientY;
		//document.title = elmnt.offsetTop + ',' + elmnt.offsetLeft;
		e = e || window.event;
		e.preventDefault();
		// calculate the new cursor position:
		pos1 = pos3 - e.clientX;
		pos2 = pos4 - e.clientY;
		pos3 = e.clientX;
		pos4 = e.clientY;
		// set the element's new position:

		elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
		elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
	}

	function closeDragElement() {
		//alert('DEBUG: closeDragElement');

		// stop moving when mouse button is released:
		document.onmouseup = null;
		document.onmousemove = null;

		if (elmnt) {
			var allTitlebar = elmnt.getElementsByClassName('titlebar');
			var firstTitlebar = allTitlebar[0];

			if (firstTitlebar && firstTitlebar.getElementsByTagName) {
				var elId = firstTitlebar.getElementsByTagName('b');
				if (elId && elId[0]) {
					elId = elId[0];

					if (elId && elId.innerHTML.length < 31) {
						SetPrefs(elId.innerHTML + '.style.top', elmnt.style.top);
						SetPrefs(elId.innerHTML + '.style.left', elmnt.style.left);
						//elements[i].style.top = GetPrefs(elId.innerHTML + '.style.top') || elId.style.top;
						//elements[i].style.left = GetPrefs(elId.innerHTML + '.style.left') || elId.style.left;
					} else {
						//alert('DEBUG: DraggingInit: elId is false');
					}
				}
			}
		}
	}
}

function DraggingCascade () {
	//alert('DEBUG: DraggingCascade()');
	
	var titlebarHeight = 0;

	var curTop = 55;
	var curLeft = 5;
	var curZ = 0;

	var elements = document.getElementsByClassName('dialog');
	for (var i = 0; i < elements.length; i++) {
	// for (var i = elements.length - 1; 0 <= i; i--) { // walk backwards for positioning reasons
		// walking backwards is necessary to preserve the element positioning on the page
		// once we remove the element from the page flow, all the other elements reflow to account it
		// if we walk forwards here, all the elements will end up in the top left corner

		var allTitlebar = elements[i].getElementsByClassName('titlebar');
		var firstTitlebar = allTitlebar[0];

		var allMenubar = elements[i].getElementsByClassName('menubar');
		var firstMenubar = allMenubar[0];

		titlebarHeight = 30;

		if (firstMenubar) {
			elements[i].style.zIndex = 1337;
		} else {
			if (firstTitlebar && firstTitlebar.getElementsByTagName) {
				// dragElement(elements[i], firstTitlebar);
				var elId = firstTitlebar.getElementsByTagName('b');
				elId = elId[0];

				elements[i].style.top = curTop + 'px';
				elements[i].style.left = curLeft +'px';
				elements[i].style.zIndex = curZ;

				curZ++;
				curTop += titlebarHeight;
				curLeft += titlebarHeight;
			}
		}
	}
} // DraggingCascade()

function DraggingInit (doPosition) {
// InitDrag { DragInit {
// initialize all class=dialog elements on the page to be draggable

	//alert('DEBUG: DraggingInit');

	if (!document.getElementsByClassName) {
		// feature check
		return '';
	}

//	if (window.GetPrefs && !GetPrefs('draggable')) {
//		//alert('DEBUG: DraggingInit: warning: GetPrefs(draggable) was false, returning');
//		return '';
//	}

	if (doPosition) {
		doPosition = 1;
	} else {
		doPosition = 0;
	}

	var elements = document.getElementsByClassName('dialog');
	// for (var i = 0; i < elements.length; i++) {
	for (var i = elements.length - 1; 0 <= i; i--) { // walk backwards for positioning reasons
		// walking backwards is necessary to preserve the element positioning on the page
		// once we remove the element from the page flow, all the other elements reflow to account it
		// if we walk forwards here, all the elements will end up in the top left corner

		var allTitlebar = elements[i].getElementsByClassName('titlebar');
		var firstTitlebar = allTitlebar[0];

		if (firstTitlebar && firstTitlebar.getElementsByTagName) {
			dragElement(elements[i], firstTitlebar);
			var elId = firstTitlebar.getElementsByTagName('b');
			elId = elId[0];
			if (doPosition && elId && elId.innerHTML.length < 31) {
				elements[i].style.top = GetPrefs(elId.innerHTML + '.style.top') || elements[i].style.top;
				elements[i].style.left = GetPrefs(elId.innerHTML + '.style.left') || elements[i].style.left;
			} else {
				//alert('DEBUG: DraggingInit: elId is false');
			}
		}
	}
} // DraggingInit()

/* / dragging.js */

// -->
</script>
<!-- / html/utils/scriptinject.template -->
</body></html>
<!-- InjectJs2: back_to_top_button -->

<!-- html/utils/scriptinject.template -->
<script language=javascript><!--
// begin back_to_top_button.js
function showBackToTop () { // show or hide "back to top" button depending on vertical scroll state
    var pageOffset = document.body.scrollTop;

    if (100 < pageOffset) {
    	if (window.showBackToTopLastAction != 1) {
//			var colorBody = document.body.style.backgroundColor || document.body.getAttribute('bgcolor'));
//			var colorButton = document.getElementById('aBackToTop').style.backgroundColor;
//
//			setTimeout("document.getElementById('aBackToTop').style.backgroundColor = '#002000'", 250);
//			setTimeout("document.getElementById('aBackToTop').style.backgroundColor = '#004000'", 500);
//			setTimeout("document.getElementById('aBackToTop').style.backgroundColor = '#006000'", 750);
//			setTimeout("document.getElementById('aBackToTop').style.backgroundColor = '#008000'", 1000);

			document.getElementById('aBackToTop').style.visibility = 'visible';
			window.showBackToTopLastAction = 1;
		}
    } else {
    	if (window.showBackToTopLastAction != 0) {
        	document.getElementById('aBackToTop').style.visibility = 'hidden';
        	window.showBackToTopLastAction = 0;
		}
    }

    return true;
} // showBackToTop()

if (document.getElementById) { // enable window.onscroll if getElementById exists
    window.onscroll = window.showBackToTop;
    showBackToTop();
}
// end back_to_top_button.js

// -->
</script>
<!-- / html/utils/scriptinject.template -->

<!-- InjectJs2: loading_end -->

<!-- html/utils/scriptinject.template -->
<script language=javascript><!--
// begin loading_end.js

function HideLoadingIndicator () {
	if (!document.getElementById) {
		return '';
	}

	var loadingIndicator = window.loadingIndicator;

	if (!loadingIndicator) {
		if (document.getElementById) {
			loadingIndicator = document.getElementById('loadingIndicator');
		}
	}

	if (window.loadingIndicatorShowTimeout) {
		clearTimeout(loadingIndicatorShowTimeout);
	}

	loadingIndicator.innerHTML = 'Ready.';
//	loadingIndicator.style.backgroundColor = '$colorHighlightAdvanced';

	window.loadingIndicator = loadingIndicator;

	setTimeout('if (window.loadingIndicator) { window.loadingIndicator.style.display = "none"; }', 3000); //#todo
	// } else {
	// 	if (loadingIndicator) { loadingIndicator.style.display = 'none' }
	// }
	return '';
} // HideLoadingIndicator()

function WaitForOpenPgp () {
	//alert('debug: WaitForOpenPgp()');
	var d = new Date();
	if (window.openPgpJsLoadBegin && window.openpgp) {
		HideLoadingIndicator();
	} else {
		setTimeout('if (window.WaitForOpenPgp) { WaitForOpenPgp() }', 500);
	}
} // WaitForOpenPgp()

if (!window.OnLoadEverything && window.HideLoadingIndicator) {
	HideLoadingIndicator();
}

// end loading_end.js

// -->
</script>
<!-- / html/utils/scriptinject.template -->
